<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% load static %}
    <link rel="stylesheet" href="{% static 'styles/style.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="shortcut icon" type="image/png" href="{% static '/img/favicon.ico' %}" alt="TCLP" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Assistant:300&text=abcdefghijklmnopqrstuvwxyzɐɑɒɓɔɕɖɗɘəɚɛɜɝɞɟɠɡɢɣɤɥɦɧɨɩɪɫɬɭɮɯɰɱɲɳɴɵɶɷɸɹɺɻɼɽɾɿʀʁʂʃʄʅʆʇʈʉʊʋʌʍʎʏʐʑʒʓʔ" rel="stylesheet">
    

    <!--<link href="https://fonts.googleapis.com/css?family=Assistant:300&subset=all" rel="stylesheet">-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    {% block title %} 
    {% endblock %}
</head>
<body>
    {% include 'navbar.html' %}
    {% block body %}
    {% endblock %}
    {% include 'footer.html' %}
</body>
    {% block script %}
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<script>
    (function() {
if (!localStorage.getItem('cookieconsent')) {
    document.body.innerHTML += '\
    <div class="cookieconsent" style="position:fixed;padding:20px;left:0;bottom:0;background-color:#000;color:#FFF;text-align:center;width:100%;z-index:99999;">\
        This site uses cookies. By continuing to use this website, you agree to their use. \
        <a href="#" style="color:#CCCCCC;">I Understand</a>\
    </div>\
    ';
    document.querySelector('.cookieconsent a').onclick = function(e) {
        e.preventDefault();
        document.querySelector('.cookieconsent').style.display = 'none';
        localStorage.setItem('cookieconsent', true);
    };
}
})();
</script>
</script>

<div id="demo"></div>
    
<script >
  let IPA_result = "";
let data_file = './en_US.json';

function update_result () {
  
  let c_w = (get_IPA_tBox()+" ").split(" ");

  set_IPA_tBox ("loading....");

  get_IPA_DB ((obj)=>{

    
    let str = "";

    for (var i = 0; i < c_w.length; i++) {

      let word = c_w[i];

      preprocess_eng(word,(t_word)=>{

        if ( word != "") {
          if(typeof obj[t_word] != "undefined"){

            let ipa = obj[t_word];

            if (document.getElementById("wf_c_words").checked) {

                str += "( " + word + " : " + ipa + " ) ";

              }else  str += ipa + " ";

          }else str += word + " ";

          set_IPA_tBox (str);

        }
      });
    }

  });
}

function get_IPA_DB (s) {
  var xmlhttp = new XMLHttpRequest();
  xmlhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
          var myObj = JSON.parse(this.responseText);
          return s(myObj);
      }
  };

  if (document.getElementById("IPA_US").checked){
    data_file = './en_US.json';
  }else if (document.getElementById("IPA_UK").checked) {
    data_file = './en_UK.json';
  }else {
    data_file = './en_US.json';
  }

  xmlhttp.open("GET", data_file, true);
  xmlhttp.send();
}

function get_IPA_tBox () {
  return document.getElementById("cWords_tBox").value
}

function set_IPA_tBox (v = IPA_result) {
  document.getElementById("IPA_tBox").value = v;
}

function preprocess_eng (x,callback){
  x = x.replace(/A/g, "a");
  x = x.replace(/B/g, "b");
  x = x.replace(/C/g, "c");
  x = x.replace(/D/g, "d");
  x = x.replace(/E/g, "e");
  x = x.replace(/F/g, "f");
  x = x.replace(/G/g, "g");
  x = x.replace(/H/g, "h");
  x = x.replace(/I/g, "i");
  x = x.replace(/J/g, "j");
  x = x.replace(/K/g, "k");
  x = x.replace(/L/g, "l");
  x = x.replace(/M/g, "m");
  x = x.replace(/N/g, "n");
  x = x.replace(/O/g, "o");
  x = x.replace(/P/g, "p");
  x = x.replace(/Q/g, "q");
  x = x.replace(/R/g, "r");
  x = x.replace(/S/g, "s");
  x = x.replace(/T/g, "t");
  x = x.replace(/U/g, "u");
  x = x.replace(/V/g, "v");
  x = x.replace(/W/g, "w");
  x = x.replace(/X/g, "x");
  x = x.replace(/Y/g, "y");
  x = x.replace(/Z/g, "z");
  x = x.replace(/\./g, "");
  x = x.replace(/\,/g, "");
  x = x.replace(/\n/g, "");
  callback(x);
}

update_result ();
</script>
    {% endblock %}
</html>